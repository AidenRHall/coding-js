<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
<meta charset="UTF-8">

<link rel="stylesheet" type="text/css" href="deps/codemirror/lib/codemirror.css" />
<link rel="stylesheet" type="text/css" href="coding.css" />
<style>
body {
  margin-top: 1em;
  margin-left: 3em;
}

/*english text, meant for reading*/
p, table, label, h1, h2, h3, h4, a {
  font-family:Georgia;
  color:#2E2E2E;
  line-height:1.5em;
  text-align: justify;
}

h1, h2, h3, h4 {
  margin-top: 1.5em;
  color: #444;
}

h2 {
  margin-top: 2em;
}

tt {
  border: 1px #999999 solid;
  padding-left:1px;
  padding-right:1px;
  background-color: rgba(0,0,0,0.05);
}

li {
  font-family:Georgia;
  color:#2E2E2E;
}
</style>

<script src="deps/lib-xj.js"></script>
<script src="deps/codemirror/lib/codemirror.js"></script>
<script src="deps/codemirror/mode/scheme/scheme.js"></script>
<script src="deps/jquery.min.js"></script>
<script src="coding.js"> </script>
<script>
  set_interpreter_path("");
</script>
</head>
<body>

<div id="main">

<p> This is a demo of web-worker-interpreter and coding.js.

<h3> Introduction </h3>

<p> Making a code fagment interactive is very easy.

<div id="scheme-plus-1">
(+ 137 349)
</div>
<script> prompt("scheme-plus-1"); </script>

<p> Or you can separate the fragment from the output.

<div id="scheme-number">
486
</div>
<script>
makeEditable("scheme-number");
</script>

<p> like so:

<div id="scheme-number-output" class="output"> </div>
<script>
editorOf["scheme-number"].setOption('onBlur', function() {
  return compute("scheme-number");
});
</script>

<h3> Dependency management </h3>

TODO

<script>

var todo = Object.keys(editorOf);

(function proc() {
  if (todo.length == 0) {
    return;
  }
  try {
    var first = todo.shift();
    editorOf[first].getOption("onBlur")().then(proc);
  } catch (err) {
    proc();
  }
})();


</script>

</body>
</html>
